<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAMSKRUTHI - INTERCOLLEGIATE FEST</title>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap"></noscript>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js" defer></script>
</head>
<body>
  <canvas id="stars-canvas"></canvas>
  <div class="page-wrapper">
    <header>
      <div class="hamburger" id="hamburger">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <nav id="navbar">
        <a href="index.html">Home</a>
        <a href="events.html">Events</a>
        <a href="registration.html">Registration</a>
        <a href="about.html">About Us</a>
        <a href="schedule.html">Schedule</a>
        <a href="contact.html">Contact Us</a>
      </nav>
    </header>
    <main class="content schedule">
      <div class="container">
        <h1>Event Schedule</h1>
        <div class="toggle-button">
          <div class="toggle-switch" onclick="toggleDay()">
            <div class="slider-indicator" id="sliderIndicator"></div>
            <span id="labelDay1">Day 1</span>
            <span id="labelDay2">Day 2</span>
          </div>
        </div>
        <div class="table-wrapper active" id="day1">
          <table class="schedule-table">
            <thead>
              <tr><th>Day</th><th>Event Name</th><th>Time</th><th>Venue</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="table-wrapper" id="day2">
          <table class="schedule-table">
            <thead>
              <tr><th>Day</th><th>Event Name</th><th>Time</th><th>Venue</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </main>
    <footer>
      <div class="footer-left">
        <a href="https://www.instagram.com/samskruthi_official_2k25/" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-instagram"></i> SAMSKRUTHI&nbsp;-&nbsp;Instagram
        </a>
        <a href="https://www.instagram.com/bmsccm_off/?hl=en" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-instagram"></i> BMSCCM&nbsp;-&nbsp;Instagram
        </a>
        <a href="https://www.bmsccm.ac.in/" target="_blank" rel="noopener noreferrer">
          <i class="fas fa-globe"></i> BMSCCM Website
        </a>
      </div>
      <div class="footer-right">
        <iframe 
          src="https://maps.google.com/maps?q=bmsccm&output=embed" 
          allowfullscreen 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </footer>
    <div class="footer-credit">
      2025 SAMSKRUTHI | Made with ❤️ by Puneet Sethiya & Adithya K.P (6 BCA)
    </div>
  </div>
  <script src="js/script.js" defer></script>
  <script>
    
    function extractFullTimeRange(dateTimeStr) {
      if (!dateTimeStr) return 'N/A';
      const cleaned = dateTimeStr.replace(/(\d+)(st|nd|rd|th)/g, '$1');
      let parts = [];
      if (cleaned.includes('|')) {
        parts = cleaned.split('|');
      } else if (cleaned.includes(',')) {
        parts = cleaned.split(',');
      } else {
        return 'N/A';
      }
      const timePart = parts[1] ? parts[1].trim() : 'N/A';
      return timePart;
    }

    async function loadSchedule() {
      const response = await fetch('http://localhost:3000/api/events/schedule');
      const schedule = await response.json();
      const day1Table = document.getElementById('day1').querySelector('tbody');
      const day2Table = document.getElementById('day2').querySelector('tbody');
      day1Table.innerHTML = '';
      day2Table.innerHTML = '';
      schedule.forEach(event => {
        const time = extractFullTimeRange(event.dateTime);
        const row = `
          <tr>
            <td>${event.day || 'N/A'}</td>
            <td>${event.title || 'Untitled Event'}</td>
            <td>${time}</td>
            <td>${event.venue || 'TBD'}</td>
          </tr>
        `;
        if (event.day === 'Day 1') {
          day1Table.innerHTML += row;
        } else if (event.day === 'Day 2') {
          day2Table.innerHTML += row;
        }
      });
    }
    document.addEventListener('DOMContentLoaded', loadSchedule);

    // Toggle Day Switch (UI only)
    function toggleDay() {
      const day1 = document.getElementById('day1');
      const day2 = document.getElementById('day2');
      const slider = document.getElementById('sliderIndicator');
      if (day1.classList.contains('active')) {
        day1.classList.remove('active');
        day2.classList.add('active');
        slider.style.transform = 'translateX(100%)';
      } else {
        day2.classList.remove('active');
        day1.classList.add('active');
        slider.style.transform = 'translateX(0)';
      }
    }
  </script>
</body>
</html>
